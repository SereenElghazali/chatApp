<div class="login-form">

  <div *ngIf="choosingImage">
    <img-cropper [image]="data" [settings]="cropperSettings"></img-cropper><br>
    <br>
    <br>
    
    <button (click)="SaveImage()">Save</button>
</div>
<form #f="ngForm" (ngSubmit)="onSubmit()" *ngIf="!choosingImage">

 
  
      <div class="form-group">
          <label>username</label>
          <input type="text" name="username"  class="form-control"  [(ngModel)]="username" 
          required >
      </div>


      <div class="form-group">
          <label>Email</label>
          <input type="text" name="email" class="form-control"
            [ngClass]="{
              'is-invalid': email.invalid && (email.dirty || email.touched),
              'is-valid': email.valid && email.dirty
            }"
            [(ngModel)]="email"
            required
            pattern="[^ @]*@[^ @]*"
          
          >
          <div class="invalid-feedback" *ngIf="email.invalid && (email.dirty || email.touched)">
            <div *ngIf="email.errors.required" >
              Email is required
            </div>
            <div *ngIf="email.errors.pattern" >
              Invalid Email
            </div>
          </div>
          <!--<pre>Dirty? {{ email.dirty }}</pre>-->
        </div>


        <div class="form-group">
            <label>Password</label>
            <input type="password" name="password"  class="form-control"  [(ngModel)]="password"  required >
        </div>
    
        <div class="choose-image">
            <img [src]="data.image? data.image : 'https://via.placeholder.com/128x128'" class="user-image"/>
            <br>
            <br>
            <button (click)="chooseImage()">Choose Image</button>
            <div class="progress-bar progress-bar-info progress-bar-striped"
                role="progressbar" attr.aria-valuenow="{{progress.percentage}}"
                aria-valuemin="0" aria-valuemax="100"
                [ngStyle]="{width:progress.percentage+'%'}">
                {{progress.percentage}}%
              </div>
        </div>
    

   
        <button [disabled]="f.invalid" type="submit" class="btn btn-primary">Submit</button>
     
</form>



</div>
